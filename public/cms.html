<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Upload Form</title>
    <!-- Latest compiled and minified CSS & JS -->
    <link
      href="https://maxcdn.bootstrapcdn.com/bootswatch/4.0.0/flatly/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="stylesheets/feed-style.css"
      media="screen"
      title="no title"
    />
    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    

  </head>

  <body>
    <div class="container">
      <div class="row top-30">
        <div class="col-md-2 col-sm-2">
          <a class="btn btn-light" href="/logout">
            Logout
          </a>
        </div>
        <div class="col-md-2 col-sm-2">
          <a class="btn btn-light" href="/members">Content Feed</a>
        </div>
        <div class="col-md-2 col-sm-2">
          <a class="btn btn-light" href="/user-manager">Community</a>
        </div>
      </div>
    </div>

    <div class="container">
      <div class="row">
        <div class="col-md-6 offset-md-3">
          <h3>Posting as: <span class="member-name"></span></h3>
        </div>
      </div>
      <div class="row">
        <div class="col-md-6 offset-md-3">
          <form id="cms">
            <div class="form-group">
              <label for="title">Title:</label>
              <input
                placeholder="Post Title"
                type="text"
                class="form-control"
                id="title"
              />
              <br />
              <label for="body">Body:</label>
              <textarea
                placeholder="Post Body"
                class="form-control"
                rows="10"
                id="body"
              ></textarea>
              <div class="form-group"></div>
              <br />
              <button type="submit" class="btn btn-success submit">
                Submit
              </button>
            </div>
          </form>
        </div>
      </div>
    </form>

    <form ref='uploadForm' 
    id='upload' 
    data="file"
    action='http://localhost:8080/upload' 
    method='post' 
    encType="multipart/form-data">
      <input type="file" name="inputFile" id="inputFile" multiple />
      <input type='submit' value='upload'/>
</form>

<div id="demo"></div>

<!-- <script>
  const upload = require("upload")
function uploadFile() {

  var file = document.getElementById('file').files[0];
  var fd = new FormData();

  var key = "events/" + (new Date).getTime() + '-' + file.name;

  fd.append('key', key);
  fd.append('acl', 'public-read'); 
  fd.append('Content-Type', file.type);      
  fd.append('AWSAccessKeyId', process.env.AWS_ACCESS_KEY_ID);
  fd.append('policy', 'YOUR POLICY')
  fd.append('signature','YOUR SIGNATURE');

  fd.append("file",file);

  var xhr = new XMLHttpRequest();

  xhr.upload.addEventListener("progress", uploadProgress, false);
  xhr.addEventListener("load", uploadComplete, false);
  xhr.addEventListener("error", uploadFailed, false);
  xhr.addEventListener("abort", uploadCanceled, false);

  xhr.open('POST', 'https://zstorm.s3.amazonaws.com/', true); //MUST BE LAST LINE BEFORE YOU SEND 

  xhr.send(fd);
}

function uploadProgress(evt) {
    if (evt.lengthComputable) {
      var percentComplete = Math.round(evt.loaded * 100 / evt.total);
      document.getElementById('progressNumber').innerHTML = percentComplete.toString() + '%';
    }
    else {
      document.getElementById('progressNumber').innerHTML = 'unable to compute';
    }
  }

  function uploadComplete(evt) {
    /* This event is raised when the server send back a response */
    alert("Done - " + evt.target.responseText );
  }

  function uploadFailed(evt) {
    alert("There was an error attempting to upload the file." + evt);
  }

  function uploadCanceled(evt) {
    alert("The upload has been canceled by the user or the browser dropped the connection.");
  }
</script> -->
<script src="js/cms.js" type="text/javascript"></script>
  </body>
</html>
